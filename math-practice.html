<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>初二数学压轴题训练</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 30px 0;
            color: white;
        }

        h1 {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: rgba(255,255,255,0.2);
            border-radius: 16px;
            padding: 4px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .tab {
            flex: 1;
            padding: 12px 20px;
            border-radius: 12px;
            border: none;
            background: transparent;
            color: white;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'MiSans', sans-serif;
        }

        .tab.active {
            background: white;
            color: #667eea;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            display: none;
        }

        .card.active {
            display: block;
            animation: slideIn 0.4s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 20px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        canvas {
            display: block;
            margin: 0 auto 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            touch-action: none;
        }

        .input-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
            font-weight: 500;
        }

        input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            font-family: 'MiSans', sans-serif;
            transition: all 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102,126,234,0.1);
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'MiSans', sans-serif;
            margin-bottom: 12px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(102,126,234,0.3);
        }

        .btn-primary:active {
            transform: scale(0.98);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .result {
            padding: 16px;
            border-radius: 12px;
            margin-top: 16px;
            display: none;
        }

        .result.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
            display: block;
            animation: bounceIn 0.5s ease;
        }

        .result.wrong {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
            display: block;
            animation: shake 0.5s ease;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.9); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }

        .hint {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
            padding: 12px;
            border-radius: 12px;
            margin-top: 12px;
            font-size: 14px;
            display: none;
        }

        @media (max-width: 600px) {
            .container {
                padding: 16px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .question {
                font-size: 16px;
                padding: 14px;
            }
            
            canvas {
                max-width: 100%;
                height: auto;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-value {
                font-size: 20px;
            }
        }

        @media (orientation: landscape) and (max-height: 500px) {
            header {
                padding: 20px 0;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .subtitle {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>初二数学压轴题训练</h1>
            <div class="subtitle">目标：从105分提升到115+分</div>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('function')">函数图像</button>
            <button class="tab" onclick="switchTab('moving')">动点问题</button>
        </div>

        <!-- 函数图像练习 -->
        <div class="card active" id="function-card">
            <div class="question" id="function-question">
                题目加载中...
            </div>
            
            <canvas id="function-canvas" width="350" height="350"></canvas>
            
            <div class="input-group">
                <label>函数解析式（例如：y=2x+1）</label>
                <input type="text" id="function-answer" placeholder="输入你的答案">
            </div>
            
            <button class="btn btn-primary" onclick="checkFunctionAnswer()">提交答案</button>
            <button class="btn btn-secondary" onclick="showFunctionHint()">提示</button>
            <button class="btn btn-secondary" onclick="generateFunctionQuestion()">下一题</button>
            
            <div class="result" id="function-result"></div>
            <div class="hint" id="function-hint"></div>
        </div>

        <!-- 动点问题练习 -->
        <div class="card" id="moving-card">
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="correct-count">0</div>
                    <div class="stat-label">答对</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="wrong-count">0</div>
                    <div class="stat-label">答错</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="accuracy">0%</div>
                    <div class="stat-label">正确率</div>
                </div>
            </div>

            <div class="question" id="moving-question">
                题目加载中...
            </div>
            
            <canvas id="moving-canvas" width="350" height="280"></canvas>
            
            <div class="input-group">
                <label>面积 S 与时间 t 的关系（例如：S=9t）</label>
                <input type="text" id="moving-answer" placeholder="输入你的答案">
            </div>
            
            <button class="btn btn-primary" onclick="checkMovingAnswer()">提交答案</button>
            <button class="btn btn-secondary" onclick="showMovingHint()">提示</button>
            <button class="btn btn-secondary" onclick="generateMovingQuestion()">下一题</button>
            
            <div class="result" id="moving-result"></div>
            <div class="hint" id="moving-hint"></div>
        </div>
    </div>

    <script>
        // 全局变量
        let currentFunctionQuestion = null;
        let currentMovingQuestion = null;
        let correctCount = 0;
        let wrongCount = 0;

        // 切换标签页
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
            
            if (tab === 'function') {
                document.querySelectorAll('.tab')[0].classList.add('active');
                document.getElementById('function-card').classList.add('active');
                generateFunctionQuestion();
            } else {
                document.querySelectorAll('.tab')[1].classList.add('active');
                document.getElementById('moving-card').classList.add('active');
                generateMovingQuestion();
            }
        }

        // 生成函数图像题目
        function generateFunctionQuestion() {
            const types = ['linear', 'inverse'];
            const type = types[Math.floor(Math.random() * types.length)];
            
            if (type === 'linear') {
                // 一次函数 y = kx + b
                const k = (Math.floor(Math.random() * 9) + 1) * (Math.random() > 0.5 ? 1 : -1);
                const b = (Math.floor(Math.random() * 10) + 1) * (Math.random() > 0.5 ? 1 : -1);
                
                currentFunctionQuestion = {
                    type: 'linear',
                    k: k,
                    b: b,
                    answer: `y=${k}x${b >= 0 ? '+' : ''}${b}`,
                    points: []
                };
                
                // 生成两个点
                for (let x = -3; x <= 3; x++) {
                    const y = k * x + b;
                    if (y >= -5 && y <= 5) {
                        currentFunctionQuestion.points.push({x, y});
                    }
                }
                
                document.getElementById('function-question').innerHTML = 
                    `如图，直线经过点 A(${currentFunctionQuestion.points[0].x}, ${currentFunctionQuestion.points[0].y}) 和 B(${currentFunctionQuestion.points[1].x}, ${currentFunctionQuestion.points[1].y})，求这条直线的函数解析式。`;
                
                drawFunctionGraph();
            } else {
                // 反比例函数 y = k/x
                const k = (Math.floor(Math.random() * 20) + 1) * (Math.random() > 0.5 ? 1 : -1);
                const x0 = Math.floor(Math.random() * 5) + 1;
                const y0 = k / x0;
                
                currentFunctionQuestion = {
                    type: 'inverse',
                    k: k,
                    answer: `y=${k}/x`,
                    points: [{x: x0, y: y0}]
                };
                
                document.getElementById('function-question').innerHTML = 
                    `如图，双曲线经过点 A(${x0}, ${y0})，求该反比例函数的解析式。`;
                
                drawInverseGraph();
            }
            
            // 重置输入和结果
            document.getElementById('function-answer').value = '';
            document.getElementById('function-result').className = 'result';
            document.getElementById('function-result').textContent = '';
            document.getElementById('function-hint').style.display = 'none';
        }

        // 绘制一次函数图像
        function drawFunctionGraph() {
            const canvas = document.getElementById('function-canvas');
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.clearRect(0, 0, w, h);
            
            // 坐标轴
            const padding = 40;
            const axisLength = w - padding * 2;
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            // x 轴
            ctx.beginPath();
            ctx.moveTo(padding, h / 2);
            ctx.lineTo(w - padding, h / 2);
            ctx.stroke();
            
            // y 轴
            ctx.beginPath();
            ctx.moveTo(w / 2, padding);
            ctx.lineTo(w / 2, h - padding);
            ctx.stroke();
            
            // 刻度
            ctx.fillStyle = '#666';
            ctx.font = '12px MiSans';
            ctx.textAlign = 'center';
            
            for (let i = -5; i <= 5; i++) {
                if (i !== 0) {
                    const x = w / 2 + i * (axisLength / 10);
                    const y = h / 2;
                    
                    ctx.beginPath();
                    ctx.moveTo(x, y - 5);
                    ctx.lineTo(x, y + 5);
                    ctx.stroke();
                    
                    ctx.fillText(i.toString(), x, y + 20);
                }
            }
            
            ctx.textAlign = 'right';
            for (let i = -5; i <= 5; i++) {
                if (i !== 0) {
                    const x = w / 2;
                    const y = h / 2 - i * (axisLength / 10);
                    
                    ctx.beginPath();
                    ctx.moveTo(x - 5, y);
                    ctx.lineTo(x + 5, y);
                    ctx.stroke();
                    
                    ctx.fillText(i.toString(), x - 10, y + 4);
                }
            }
            
            // 绘制函数
            const {k, b} = currentFunctionQuestion;
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let px = padding; px <= w - padding; px++) {
                const x = (px - w / 2) / (axisLength / 10);
                const y = k * x + b;
                const py = h / 2 - y * (axisLength / 10);
                
                if (py >= padding && py <= h - padding) {
                    if (px === padding) {
                        ctx.moveTo(px, py);
                    } else {
                        ctx.lineTo(px, py);
                    }
                }
            }
            ctx.stroke();
            
            // 标记点
            ctx.fillStyle = '#764ba2';
            currentFunctionQuestion.points.slice(0, 2).forEach(point => {
                const px = w / 2 + point.x * (axisLength / 10);
                const py = h / 2 - point.y * (axisLength / 10);
                
                ctx.beginPath();
                ctx.arc(px, py, 6, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        // 绘制反比例函数图像
        function drawInverseGraph() {
            const canvas = document.getElementById('function-canvas');
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.clearRect(0, 0, w, h);
            
            // 坐标轴
            const padding = 40;
            const axisLength = w - padding * 2;
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            // x 轴
            ctx.beginPath();
            ctx.moveTo(padding, h / 2);
            ctx.lineTo(w - padding, h / 2);
            ctx.stroke();
            
            // y 轴
            ctx.beginPath();
            ctx.moveTo(w / 2, padding);
            ctx.lineTo(w / 2, h - padding);
            ctx.stroke();
            
            // 刻度
            ctx.fillStyle = '#666';
            ctx.font = '12px MiSans';
            ctx.textAlign = 'center';
            
            for (let i = -5; i <= 5; i++) {
                if (i !== 0) {
                    const x = w / 2 + i * (axisLength / 10);
                    const y = h / 2;
                    
                    ctx.beginPath();
                    ctx.moveTo(x, y - 5);
                    ctx.lineTo(x, y + 5);
                    ctx.stroke();
                    
                    ctx.fillText(i.toString(), x, y + 20);
                }
            }
            
            ctx.textAlign = 'right';
            for (let i = -5; i <= 5; i++) {
                if (i !== 0) {
                    const x = w / 2;
                    const y = h / 2 - i * (axisLength / 10);
                    
                    ctx.beginPath();
                    ctx.moveTo(x - 5, y);
                    ctx.lineTo(x + 5, y);
                    ctx.stroke();
                    
                    ctx.fillText(i.toString(), x - 10, y + 4);
                }
            }
            
            // 绘制双曲线
            const {k} = currentFunctionQuestion;
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            
            // 第一象限
            ctx.beginPath();
            for (let x = 0.1; x <= 5; x += 0.1) {
                const y = k / x;
                if (y >= -5 && y <= 5) {
                    const px = w / 2 + x * (axisLength / 10);
                    const py = h / 2 - y * (axisLength / 10);
                    
                    if (x === 0.1) {
                        ctx.moveTo(px, py);
                    } else {
                        ctx.lineTo(px, py);
                    }
                }
            }
            ctx.stroke();
            
            // 第三象限
            ctx.beginPath();
            for (let x = -5; x <= -0.1; x += 0.1) {
                const y = k / x;
                if (y >= -5 && y <= 5) {
                    const px = w / 2 + x * (axisLength / 10);
                    const py = h / 2 - y * (axisLength / 10);
                    
                    if (x === -5) {
                        ctx.moveTo(px, py);
                    } else {
                        ctx.lineTo(px, py);
                    }
                }
            }
            ctx.stroke();
            
            // 标记点
            ctx.fillStyle = '#764ba2';
            const point = currentFunctionQuestion.points[0];
            const px = w / 2 + point.x * (axisLength / 10);
            const py = h / 2 - point.y * (axisLength / 10);
            
            ctx.beginPath();
            ctx.arc(px, py, 6, 0, Math.PI * 2);
            ctx.fill();
        }

        // 检查函数答案
        function checkFunctionAnswer() {
            const userAnswer = document.getElementById('function-answer').value.replace(/\s/g, '');
            const correctAnswer = currentFunctionQuestion.answer.replace(/\s/g, '');
            
            const resultDiv = document.getElementById('function-result');
            
            // 简单的答案匹配（可以优化）
            if (userAnswer === correctAnswer || 
                userAnswer.replace(/y=/, '') === correctAnswer.replace(/y=/, '')) {
                resultDiv.className = 'result correct';
                resultDiv.textContent = '✓ 回答正确！';
                correctCount++;
            } else {
                resultDiv.className = 'result wrong';
                resultDiv.textContent = `✗ 答案错误。正确答案是：${currentFunctionQuestion.answer}`;
                wrongCount++;
            }
            
            updateStats();
        }

        // 显示函数提示
        function showFunctionHint() {
            const hintDiv = document.getElementById('function-hint');
            
            if (currentFunctionQuestion.type === 'linear') {
                hintDiv.innerHTML = `
                    <strong>提示：</strong><br>
                    1. 设函数解析式为 y = kx + b<br>
                    2. 将两个点的坐标代入方程组<br>
                    3. 解方程组求出 k 和 b 的值
                `;
            } else {
                hintDiv.innerHTML = `
                    <strong>提示：</strong><br>
                    1. 设反比例函数解析式为 y = k/x<br>
                    2. 将点的坐标代入，求出 k 的值<br>
                    3. 注意：k = x × y
                `;
            }
            
            hintDiv.style.display = 'block';
        }

        // 生成动点问题
        function generateMovingQuestion() {
            const width = Math.floor(Math.random() * 4) + 6; // 6-10
            const height = Math.floor(Math.random() * 4) + 6; // 6-10
            const pSpeed = Math.floor(Math.random() * 3) + 1; // 1-3
            const qSpeed = Math.floor(Math.random() * 3) + 1; // 1-3
            
            currentMovingQuestion = {
                width: width,
                height: height,
                pSpeed: pSpeed,
                qSpeed: qSpeed,
                answer: `S=${width * pSpeed / 2}t`,
                maxTime: Math.min(height / pSpeed, width / qSpeed)
            };
            
            document.getElementById('moving-question').innerHTML = `
                如图，在矩形 ABCD 中，AB = ${width}，BC = ${height}。点 P 从点 A 出发，以每秒 ${pSpeed} 个单位的速度沿 AD 边向 D 运动，点 Q 从点 B 出发，以每秒 ${qSpeed} 个单位的速度沿 BC 边向 C 运动。两点同时出发，运动时间为 t 秒。设 t 秒后，△PBQ 的面积为 S，求 S 与 t 的函数关系式。
            `;
            
            drawMovingGraph();
            
            // 重置输入和结果
            document.getElementById('moving-answer').value = '';
            document.getElementById('moving-result').className = 'result';
            document.getElementById('moving-result').textContent = '';
            document.getElementById('moving-hint').style.display = 'none';
        }

        // 绘制动点图
        function drawMovingGraph() {
            const canvas = document.getElementById('moving-canvas');
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.clearRect(0, 0, w, h);
            
            const {width, height, pSpeed, qSpeed} = currentMovingQuestion;
            
            // 计算缩放比例
            const scale = Math.min((w - 80) / width, (h - 80) / height);
            const offsetX = (w - width * scale) / 2;
            const offsetY = (h - height * scale) / 2;
            
            // 绘制矩形
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.strokeRect(offsetX, offsetY, width * scale, height * scale);
            
            // 标记顶点
            ctx.fillStyle = '#333';
            ctx.font = '16px MiSans';
            ctx.textAlign = 'center';
            
            const points = {
                A: {x: offsetX, y: offsetY + height * scale},
                B: {x: offsetX + width * scale, y: offsetY + height * scale},
                C: {x: offsetX + width * scale, y: offsetY},
                D: {x: offsetX, y: offsetY}
            };
            
            ctx.fillText('A', points.A.x - 20, points.A.y + 5);
            ctx.fillText('B', points.B.x + 20, points.B.y + 5);
            ctx.fillText('C', points.C.x + 20, points.C.y + 5);
            ctx.fillText('D', points.D.x - 20, points.D.y + 5);
            
            // 标记边长
            ctx.fillStyle = '#666';
            ctx.font = '14px MiSans';
            ctx.fillText(`AB = ${width}`, (points.A.x + points.B.x) / 2, points.A.y + 30);
            ctx.fillText(`BC = ${height}`, points.B.x + 30, (points.B.y + points.C.y) / 2);
            
            // 绘制运动方向箭头
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            
            // P 点运动方向
            ctx.beginPath();
            ctx.moveTo(points.A.x, points.A.y - 20);
            ctx.lineTo(points.A.x, points.A.y - height * scale + 20);
            ctx.stroke();
            
            // 箭头
            ctx.beginPath();
            ctx.moveTo(points.A.x - 8, points.A.y - height * scale + 30);
            ctx.lineTo(points.A.x, points.A.y - height * scale + 20);
            ctx.lineTo(points.A.x + 8, points.A.y - height * scale + 30);
            ctx.stroke();
            
            // Q 点运动方向
            ctx.beginPath();
            ctx.moveTo(points.B.x, points.B.y - 20);
            ctx.lineTo(points.B.x, points.B.y - height * scale + 20);
            ctx.stroke();
            
            // 箭头
            ctx.beginPath();
            ctx.moveTo(points.B.x - 8, points.B.y - height * scale + 30);
            ctx.lineTo(points.B.x, points.B.y - height * scale + 20);
            ctx.lineTo(points.B.x + 8, points.B.y - height * scale + 30);
            ctx.stroke();
            
            // 标记速度
            ctx.fillStyle = '#e74c3c';
            ctx.font = '12px MiSans';
            ctx.fillText(`v=${pSpeed}`, points.A.x - 35, points.A.y - height * scale / 2);
            ctx.fillText(`v=${qSpeed}`, points.B.x + 35, points.B.y - height * scale / 2);
            
            // 标记动点位置（示例）
            ctx.fillStyle = '#764ba2';
            ctx.beginPath();
            ctx.arc(points.A.x, points.A.y - height * scale / 3, 5, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText('P', points.A.x - 15, points.A.y - height * scale / 3 + 5);
            
            ctx.beginPath();
            ctx.arc(points.B.x, points.B.y - height * scale / 3, 5, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText('Q', points.B.x + 15, points.B.y - height * scale / 3 + 5);
        }

        // 检查动点答案
        function checkMovingAnswer() {
            const userAnswer = document.getElementById('moving-answer').value.replace(/\s/g, '');
            const correctAnswer = currentMovingQuestion.answer.replace(/\s/g, '');
            
            const resultDiv = document.getElementById('moving-result');
            
            if (userAnswer === correctAnswer || 
                userAnswer.replace(/S=/, '') === correctAnswer.replace(/S=/, '')) {
                resultDiv.className = 'result correct';
                resultDiv.textContent = '✓ 回答正确！';
                correctCount++;
            } else {
                resultDiv.className = 'result wrong';
                resultDiv.textContent = `✗ 答案错误。正确答案是：${currentMovingQuestion.answer} (0 ≤ t ≤ ${currentMovingQuestion.maxTime.toFixed(2)})`;
                wrongCount++;
            }
            
            updateStats();
        }

        // 显示动点提示
        function showMovingHint() {
            const hintDiv = document.getElementById('moving-hint');
            const {width, pSpeed, qSpeed} = currentMovingQuestion;
            
            hintDiv.innerHTML = `
                <strong>提示：</strong><br>
                1. △PBQ 的面积 = ½ × PB × BQ<br>
                2. PB = ${width}（不变）<br>
                3. BQ = ${qSpeed}t（随时间变化）<br>
                4. 所以 S = ½ × ${width} × ${qSpeed}t = ${width * qSpeed / 2}t
            `;
            
            hintDiv.style.display = 'block';
        }

        // 更新统计
        function updateStats() {
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('wrong-count').textContent = wrongCount;
            
            const total = correctCount + wrongCount;
            const accuracy = total > 0 ? Math.round(correctCount / total * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        // 页面加载时生成第一题
        window.onload = function() {
            generateFunctionQuestion();
            generateMovingQuestion();
        };
    </script>
</body>
</html>
